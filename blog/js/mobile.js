!function(e){function t(){this.radio=document.body.scrollHeight/document.body.scrollWidth,this.scaleW=document.body.scrollWidth,this.idx=0}var i=!1;t.prototype.combine=function(){this.$tag&&(document.getElementById("js-mobile-tagcloud").innerHTML=this.$tag.innerHTML),this.$aboutme&&(document.getElementById("js-mobile-aboutme").innerHTML=this.$aboutme.innerHTML),this.$friends&&(document.getElementById("js-mobile-friends").innerHTML=this.$friends.innerHTML)},t.prototype.renderDOM=function(){var e=document.createElement("div");e.id="viewer",e.className="hide",this.$tag=document.getElementById("js-tagcloud"),this.$aboutme=document.getElementById("js-aboutme"),this.$friends=document.getElementById("js-friends");var t=this.$tag?'<span class="viewer-title">标签</span><div class="viewer-div tagcloud" id="js-mobile-tagcloud"></div>':"",i=this.$friends?'<span class="viewer-title">友情链接</span><div class="viewer-div friends" id="js-mobile-friends"></div>':"",n=this.$aboutme?'<span class="viewer-title">关于我</span><div class="viewer-div aboutme" id="js-mobile-aboutme"></div>':"";e.innerHTML='<div id="viewer-box">        <div class="viewer-box-l">            <div class="viewer-box-wrap">'+n+i+t+'</div>        </div>        <div class="viewer-box-r"></div>        </div>',document.getElementsByTagName("body")[0].appendChild(e);var s=document.getElementById("viewer-box");return this.basicwrap=s,s.style.height=document.body.scrollHeight+"px",this},t.prototype.show=function(e,t){var n=this;document.getElementById("viewer").className="",setTimeout(function(){n.basicwrap.className="anm-swipe"},0),i=!0,document.ontouchstart=function(e){return"A"!=e.target.tagName?!1:void 0}},t.prototype.hide=function(){document.getElementById("viewer-box").className="",i=!1,document.ontouchstart=function(){return!0}},t.prototype.bindDOM=function(){document.getElementById("viewer-box").addEventListener("webkitTransitionEnd",function(){0==i&&(document.getElementById("viewer").className="hide",i=!0)},!1);var t=this;this.ctn.addEventListener("touchend",function(){t.show()},!1);var n,s,o=document.getElementsByClassName("viewer-box-r")[0];o.addEventListener("touchstart",function(){n=+new Date},!1),o.addEventListener("touchend",function(){s=+new Date,300>s-n&&t.hide(),n=0,s=0},!1);var d=e("#mobile-nav .overlay"),a=e(".js-mobile-header");window.onscroll=function(){var e=document.documentElement.scrollTop+document.body.scrollTop;e>=69?d.addClass("fixed"):d.removeClass("fixed"),e>=160?a.removeClass("hide").addClass("fixed"):a.addClass("hide").removeClass("fixed")},a[0].addEventListener("touchstart",function(){e("html, body").animate({scrollTop:0},"slow")},!1)},t.prototype.resetTags=function(){var t=e(".tagcloud a");t.css({"font-size":"10px"});for(var i=0,n=t.length;n>i;i++){var s=t.eq(i).html().length%5+1;t[i].className="",t.eq(i).addClass("color"+s)}},t.prototype.init=function(){this.ctn=document.getElementsByClassName("slider-trigger")[0],this.renderDOM(),this.combine(),this.bindDOM(),this.resetTags()},window.Mobile=new t}(jQuery);